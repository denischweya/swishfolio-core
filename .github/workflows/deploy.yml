  name: Deploy to VPS                                                                                                                                        
                                                                                                                                                             
  on:                                                                                                                                                        
    push:                                                                                                                                                    
      branches:                                                                                                                                              
        - main                                                                                                                                               
                                                                                                                                                             
  jobs:                                                                                                                                                      
    deploy:                                                                                                                                                  
      runs-on: ubuntu-latest                                                                                                                                 
                                                                                                                                                             
      steps:                                                                                                                                                 
        - name: Checkout code                                                                                                                                
          uses: actions/checkout@v4                                                                                                                          
                                                                                                                                                             
        - name: Setup SSH                                                                                                                                    
          run: |                                                                                                                                             
            mkdir -p ~/.ssh                                                                                                                                  
            echo "$SSH_PRIVATE_KEY" > ~/.ssh/id_ed25519                                                                                                      
            chmod 600 ~/.ssh/id_ed25519                                                                                                                      
            ssh-keyscan -H 213.32.17.144 >> ~/.ssh/known_hosts                                                                                               
          env:                                                                                                                                               
            SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}                                                                                                  
                                                                                                                                                             
        - name: Deploy                                                                                                                                       
          run: |                                                                                                                                             
            ssh -o StrictHostKeyChecking=no ${{ secrets.SERVER_USER }}@213.32.17.144 "cd ${{ secrets.SERVER_PATH }} && git pull origin main" 
