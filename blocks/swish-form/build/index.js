(()=>{"use strict";var e,o={968(){const e=window.wp.blocks,o=window.wp.i18n,l=window.wp.element,s=window.wp.blockEditor,i=window.wp.components,r=window.wp.primitives,t=window.ReactJSXRuntime,a=(0,t.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(r.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),n=(0,t.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(r.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),c=[{label:(0,o.__)("Text","swishfolio-core"),value:"text"},{label:(0,o.__)("Email","swishfolio-core"),value:"email"},{label:(0,o.__)("Phone","swishfolio-core"),value:"tel"},{label:(0,o.__)("Textarea","swishfolio-core"),value:"textarea"},{label:(0,o.__)("Select","swishfolio-core"),value:"select"},{label:(0,o.__)("Checkbox","swishfolio-core"),value:"checkbox"}],h=[{label:(0,o.__)("Full Width","swishfolio-core"),value:"full"},{label:(0,o.__)("Half Width","swishfolio-core"),value:"half"}],d=()=>"field_"+Math.random().toString(36).substr(2,9),_=[{id:d(),type:"text",label:(0,o.__)("Name","swishfolio-core"),placeholder:"",required:!0,width:"full"},{id:d(),type:"email",label:(0,o.__)("Email","swishfolio-core"),placeholder:"",required:!0,width:"half"},{id:d(),type:"tel",label:(0,o.__)("Phone","swishfolio-core"),placeholder:"",required:!1,width:"half"},{id:d(),type:"textarea",label:(0,o.__)("Message","swishfolio-core"),placeholder:"",required:!0,width:"full"}],f=[{id:d(),type:"text",label:(0,o.__)("Name","swishfolio-core"),placeholder:"",required:!1,width:"half"},{id:d(),type:"email",label:(0,o.__)("Email","swishfolio-core"),placeholder:"",required:!0,width:"half"}],p=JSON.parse('{"UU":"swishfolio-core/swish-form"}'),w=(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12zM6 10h2v2H6v-2zm0 4h8v2H6v-2zm10 0h2v2h-2v-2zm-6-4h8v2h-8v-2z"})});(0,e.registerBlockType)(p.UU,{icon:w,edit:function({attributes:e,setAttributes:r,clientId:p}){const{formId:w,formType:m,fields:u,submitButtonText:x,successMessage:v,errorMessage:b,recipientEmail:j,emailSubject:g,espProvider:C,espListId:y,enableHoneypot:k}=e;(0,l.useEffect)(()=>{w||r({formId:"swish-form-"+p.substr(0,8)})},[w,p,r]),(0,l.useEffect)(()=>{0===u.length&&r({fields:("subscription"===m?f:_).map(e=>({...e,id:d()}))})},[]);const B=(0,s.useBlockProps)({className:`sfcore-swish-form sfcore-swish-form--${m}`}),H=(e,o,l)=>{const s=[...u];s[e]={...s[e],[o]:l},r({fields:s})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.InspectorControls,{children:[(0,t.jsxs)(i.PanelBody,{title:(0,o.__)("Form Settings","swishfolio-core"),children:[(0,t.jsx)(i.SelectControl,{label:(0,o.__)("Form Type","swishfolio-core"),value:m,options:[{label:(0,o.__)("Contact Form","swishfolio-core"),value:"contact"},{label:(0,o.__)("Subscription Form","swishfolio-core"),value:"subscription"}],onChange:e=>{r({formType:e,fields:("subscription"===e?f:_).map(e=>({...e,id:d()}))})}}),(0,t.jsx)(i.TextControl,{label:(0,o.__)("Submit Button Text","swishfolio-core"),value:x,onChange:e=>r({submitButtonText:e})}),(0,t.jsx)(i.TextareaControl,{label:(0,o.__)("Success Message","swishfolio-core"),value:v,onChange:e=>r({successMessage:e})}),(0,t.jsx)(i.TextareaControl,{label:(0,o.__)("Error Message","swishfolio-core"),value:b,onChange:e=>r({errorMessage:e})}),(0,t.jsx)(i.ToggleControl,{label:(0,o.__)("Enable Honeypot Spam Protection","swishfolio-core"),checked:k,onChange:e=>r({enableHoneypot:e})})]}),"contact"===m&&(0,t.jsxs)(i.PanelBody,{title:(0,o.__)("Email Settings","swishfolio-core"),children:[(0,t.jsx)(i.TextControl,{label:(0,o.__)("Recipient Email","swishfolio-core"),help:(0,o.__)("Leave empty to use default from settings.","swishfolio-core"),value:j,onChange:e=>r({recipientEmail:e}),type:"email"}),(0,t.jsx)(i.TextControl,{label:(0,o.__)("Email Subject","swishfolio-core"),value:g,onChange:e=>r({emailSubject:e})})]}),"subscription"===m&&(0,t.jsxs)(i.PanelBody,{title:(0,o.__)("Email Provider","swishfolio-core"),children:[(0,t.jsx)(i.SelectControl,{label:(0,o.__)("Provider","swishfolio-core"),value:C,options:[{label:(0,o.__)("Use Default (from settings)","swishfolio-core"),value:"none"},{label:"Mailchimp",value:"mailchimp"},{label:"ConvertKit",value:"convertkit"},{label:"Klaviyo",value:"klaviyo"},{label:"ActiveCampaign",value:"activecampaign"},{label:"Brevo",value:"brevo"}],onChange:e=>r({espProvider:e})}),"none"!==C&&(0,t.jsx)(i.TextControl,{label:(0,o.__)("List/Audience ID","swishfolio-core"),help:(0,o.__)("Leave empty to use default from settings.","swishfolio-core"),value:y,onChange:e=>r({espListId:e})})]}),(0,t.jsx)(i.PanelBody,{title:(0,o.__)("Form Fields","swishfolio-core"),initialOpen:!0,children:(0,t.jsxs)(i.__experimentalVStack,{spacing:4,children:[u.map((e,l)=>(0,t.jsxs)(i.Card,{size:"small",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)(i.Flex,{children:[(0,t.jsxs)(i.FlexBlock,{children:[(0,t.jsx)("strong",{children:e.label||(0,o.__)("Untitled Field","swishfolio-core")}),(0,t.jsxs)("span",{style:{marginLeft:"8px",opacity:.6,fontSize:"12px"},children:["(",e.type,")"]})]}),(0,t.jsx)(i.FlexItem,{children:(0,t.jsxs)(i.__experimentalHStack,{spacing:1,children:[(0,t.jsx)(i.Button,{icon:"arrow-up",label:(0,o.__)("Move Up","swishfolio-core"),onClick:()=>(e=>{if(0===e)return;const o=[...u];[o[e-1],o[e]]=[o[e],o[e-1]],r({fields:o})})(l),disabled:0===l,size:"small"}),(0,t.jsx)(i.Button,{icon:"arrow-down",label:(0,o.__)("Move Down","swishfolio-core"),onClick:()=>(e=>{if(e===u.length-1)return;const o=[...u];[o[e],o[e+1]]=[o[e+1],o[e]],r({fields:o})})(l),disabled:l===u.length-1,size:"small"}),(0,t.jsx)(i.Button,{icon:a,label:(0,o.__)("Remove","swishfolio-core"),onClick:()=>(e=>{const o=u.filter((o,l)=>l!==e);r({fields:o})})(l),isDestructive:!0,size:"small"})]})})]})}),(0,t.jsx)(i.CardBody,{children:(0,t.jsxs)(i.__experimentalVStack,{spacing:3,children:[(0,t.jsx)(i.SelectControl,{label:(0,o.__)("Field Type","swishfolio-core"),value:e.type,options:c,onChange:e=>H(l,"type",e),__nextHasNoMarginBottom:!0}),(0,t.jsx)(i.TextControl,{label:(0,o.__)("Label","swishfolio-core"),value:e.label,onChange:e=>H(l,"label",e),__nextHasNoMarginBottom:!0}),(0,t.jsx)(i.TextControl,{label:(0,o.__)("Placeholder","swishfolio-core"),value:e.placeholder,onChange:e=>H(l,"placeholder",e),__nextHasNoMarginBottom:!0}),(0,t.jsxs)(i.__experimentalHStack,{children:[(0,t.jsx)(i.SelectControl,{label:(0,o.__)("Width","swishfolio-core"),value:e.width,options:h,onChange:e=>H(l,"width",e),__nextHasNoMarginBottom:!0}),(0,t.jsx)(i.ToggleControl,{label:(0,o.__)("Required","swishfolio-core"),checked:e.required,onChange:e=>H(l,"required",e),__nextHasNoMarginBottom:!0})]}),"select"===e.type&&(0,t.jsx)(i.TextareaControl,{label:(0,o.__)("Options (one per line)","swishfolio-core"),value:(e.options||[]).join("\n"),onChange:e=>H(l,"options",e.split("\n").filter(Boolean)),help:(0,o.__)("Enter each option on a new line.","swishfolio-core"),__nextHasNoMarginBottom:!0})]})})]},e.id)),(0,t.jsx)(i.Button,{variant:"secondary",onClick:()=>{const e={id:d(),type:"text",label:(0,o.__)("New Field","swishfolio-core"),placeholder:"",required:!1,width:"full",options:[]};r({fields:[...u,e]})},icon:n,style:{width:"100%",justifyContent:"center"},children:(0,o.__)("Add Field","swishfolio-core")})]})})]}),(0,t.jsx)("div",{...B,children:(0,t.jsxs)("div",{className:"sfcore-swish-form__preview",children:[(0,t.jsx)("div",{className:"sfcore-swish-form__preview-header",children:(0,t.jsx)("span",{className:"sfcore-swish-form__preview-type",children:"contact"===m?(0,o.__)("Contact Form","swishfolio-core"):(0,o.__)("Subscription Form","swishfolio-core")})}),(0,t.jsx)("div",{className:"sfcore-swish-form__preview-fields",children:u.map(e=>(0,t.jsxs)("div",{className:`sfcore-swish-form__preview-field sfcore-swish-form__preview-field--${e.width}`,children:[(0,t.jsxs)("label",{className:"sfcore-swish-form__preview-label",children:[e.label,e.required&&(0,t.jsx)("span",{className:"sfcore-swish-form__preview-required",children:"*"})]}),"textarea"===e.type?(0,t.jsx)("textarea",{className:"sfcore-swish-form__preview-textarea",placeholder:e.placeholder,disabled:!0}):"select"===e.type?(0,t.jsx)("select",{className:"sfcore-swish-form__preview-select",disabled:!0,children:(0,t.jsx)("option",{children:e.placeholder||(0,o.__)("Select...","swishfolio-core")})}):"checkbox"===e.type?(0,t.jsxs)("label",{className:"sfcore-swish-form__preview-checkbox-label",children:[(0,t.jsx)("input",{type:"checkbox",disabled:!0}),(0,t.jsx)("span",{children:e.label})]}):(0,t.jsx)("input",{type:e.type,className:"sfcore-swish-form__preview-input",placeholder:e.placeholder,disabled:!0})]},e.id))}),(0,t.jsx)("div",{className:"sfcore-swish-form__preview-submit",children:(0,t.jsx)("button",{className:"sfcore-swish-form__preview-button",disabled:!0,children:x})})]})})]})},save:function(){return null}})}},l={};function s(e){var i=l[e];if(void 0!==i)return i.exports;var r=l[e]={exports:{}};return o[e](r,r.exports,s),r.exports}s.m=o,e=[],s.O=(o,l,i,r)=>{if(!l){var t=1/0;for(h=0;h<e.length;h++){for(var[l,i,r]=e[h],a=!0,n=0;n<l.length;n++)(!1&r||t>=r)&&Object.keys(s.O).every(e=>s.O[e](l[n]))?l.splice(n--,1):(a=!1,r<t&&(t=r));if(a){e.splice(h--,1);var c=i();void 0!==c&&(o=c)}}return o}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[l,i,r]},s.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={278:0,778:0};s.O.j=o=>0===e[o];var o=(o,l)=>{var i,r,[t,a,n]=l,c=0;if(t.some(o=>0!==e[o])){for(i in a)s.o(a,i)&&(s.m[i]=a[i]);if(n)var h=n(s)}for(o&&o(l);c<t.length;c++)r=t[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(h)},l=globalThis.webpackChunkswishfolio_core=globalThis.webpackChunkswishfolio_core||[];l.forEach(o.bind(null,0)),l.push=o.bind(null,l.push.bind(l))})();var i=s.O(void 0,[778],()=>s(968));i=s.O(i)})();